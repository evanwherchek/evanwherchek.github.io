import { useEffect, useRef, useState } from 'react';

function Signature() {
    const svgRef = useRef(null);
    const [totalLength, setTotalLength] = useState(0);

    useEffect(() => {
        if (svgRef.current) {
            const paths = svgRef.current.querySelectorAll('path');
            let total = 0;
            paths.forEach(path => {
                const length = path.getTotalLength();
                total += length;
                // Set initial state - path is hidden
                path.style.strokeDasharray = `${length}`;
                path.style.strokeDashoffset = `${length}`;
            });
            setTotalLength(total);

            // Start animation after a brief delay to ensure styles are applied
            setTimeout(() => {
                paths.forEach((path, index) => {
                    path.style.animation = `LineAnimation 2s ease-out forwards`;
                    path.style.animationDelay = `${0.5 + (index * 0.3)}s`;
                });
            }, 50);
        }
    }, []);

    return (
        <div>
            <style>{`
                @keyframes LineAnimation {
                    to {
                        stroke-dashoffset: 0;
                    }
                }
                .signature-svg {
                    width: 100%;
                    height: auto;
                }
                .signature-svg path {
                    fill: none;
                    stroke: black;
                    stroke-width: 8;
                    stroke-linecap: round;
                }
            `}</style>
            <p>Total SVG Path Length: {totalLength.toFixed(2)} units</p>
            <svg ref={svgRef} className="signature-svg" viewBox="0 0 686 184" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M72.993 8.90214C72.1851 8.76816 70.5653 7.69232 68.5354 6.87427C66.4291 6.02545 64.4756 5.38636 62.1757 4.84438C59.5162 4.21764 56.352 4.3024 52.0588 4.09941C48.1712 3.9156 40.799 4.0304 36.8021 4.09738C30.9085 4.19616 27.9376 4.70432 26.1777 5.58326C23.8971 6.72224 21.5799 7.14019 18.5371 8.22009C14.8675 9.52246 13.3223 11.606 12.3703 12.8888C11.1443 14.541 8.99462 16.2016 7.97156 18.5015C7.17017 20.303 6.55063 21.8853 6.00865 23.5113C5.42632 25.2582 4.92672 27.431 4.65471 29.8689C4.59237 30.4277 4.25279 30.8168 4.11476 36.2488C3.97673 41.6808 3.97673 52.1307 4.04372 57.8489C4.11858 64.2397 4.38271 68.8124 4.44969 74.9C4.48898 78.4703 5.05663 80.3462 6.27254 82.3091C7.26269 83.9076 7.89848 85.6239 8.37347 88.0578C8.84566 90.4772 9.52239 92.3875 10.7383 94.1515C11.8388 95.748 12.3642 97.8033 13.6471 100.17C14.7607 102.225 15.2061 103.893 16.085 105.519C16.9938 107.2 18.7137 109.707 20.2118 111.609C21.4209 113.144 22.9116 114.586 24.4056 116.208C26.3578 118.328 27.9213 119.458 30.8951 122.227C32.6363 123.848 34.417 124.468 36.2439 125.347C39.5397 126.933 43.8844 126.636 45.9813 126.435C47.8958 126.251 49.0322 124.338 52.004 122.316C53.0372 121.613 54.0257 120.432 54.5779 119.211C56.3703 115.243 54.0501 113.247 52.8342 111.487C51.4453 109.476 51.2082 107.295 50.5993 105.127C49.9999 102.993 48.6425 100.669 46.9495 98.5624C45.209 96.3962 43.9006 94.9777 42.5508 93.7557C40.9641 92.3193 39.4349 90.9179 38.085 90.0328C36.386 88.9189 34.4332 87.938 32.8073 86.5841C31.361 85.3797 29.5615 84.2842 27.5316 83.5372C25.229 82.6898 23.2039 81.5723 21.0359 81.2353C19.0161 80.9214 17.1142 80.4923 9.2849 80.4213C7.6333 80.4063 7.23268 80.6223 6.89165 80.9592C4.09097 83.7266 5.47073 90.4957 5.26165 94.8173C5.1146 97.8568 6.68054 101.051 8.03042 103.282C9.82286 106.244 9.92837 109.163 10.2004 112.954C10.3756 115.397 11.8202 116.884 12.5002 118.847C13.155 120.737 14.3941 122.568 15.2731 124.328C16.4121 126.608 16.83 128.658 18.1129 130.888C19.7388 133.716 19.8099 135.827 20.2808 137.658C20.8172 139.744 21.7017 141.511 22.5807 143.275C23.3783 144.876 24.6735 146.789 25.9625 148.62C27.4222 150.693 28.1974 152.878 29.2103 154.776C30.4853 157.165 31.4452 158.968 33.199 162.147C34.8101 165.067 36.5849 167.226 37.3989 169.255C38.3368 171.594 40.5067 172.641 42.1326 173.725C44.0458 175.001 46.5963 176.157 50.175 177.919C53.1825 179.4 55.6578 178.333 58.0307 177.724C60.5302 177.083 61.6175 174.549 62.7056 171.716C64.8949 166.014 63.5175 163.994 64.1265 161.964C64.465 160.836 64.8735 159.662 65.3424 158.312C66.5886 154.725 70.411 154.25 72.8489 151.951C74.6687 150.234 76.0947 147.625 77.7247 145.319C79.2632 143.142 80.6985 139.643 81.8535 137.603C82.7093 136.092 83.5404 134.358 84.4254 132.058C85.1984 130.049 86.5202 128.268 87.4012 126.104C88.6498 123.037 90.174 120.294 91.191 118.049C92.0792 116.089 93.4219 114.465 94.1689 112.839C94.56 111.987 95.1838 111.213 95.7907 110.537C96.9779 109.215 99.6415 109.187 101.809 108.706C102.882 108.468 104.379 108.367 105.934 108.568C108.028 108.838 108.581 111.607 109.797 113.232C110.927 114.743 111.285 116.884 112.639 118.914C113.952 120.883 115.475 124.046 116.498 126.224C117.284 127.898 118.187 129.738 119.001 131.771C119.678 133.465 121.028 135.015 121.775 137.857C122.371 140.124 123.732 141.917 124.684 143.614C125.598 145.243 127.118 146.789 128.269 148.553C129.506 150.448 132.112 153.812 134.02 156.67C135.514 158.908 137.129 160.592 138.485 162.356C140.062 164.407 142.001 165.472 144.368 167.159C146.589 168.742 148.497 169.532 150.123 170.477C151.909 171.517 153.641 172.105 154.79 171.904C156.679 171.574 157.16 168.866 157.84 167.24C158.52 165.615 159.596 163.726 160.544 161.895C161.809 159.452 164.33 159.39 165.215 157.902C166.16 156.313 166.368 154.121 167.446 151.815C168.427 149.717 169.072 147.755 169.951 146.129C170.83 144.503 172.182 142.883 173.603 140.853C174.943 138.938 176.639 136.664 178.474 134.762C179.773 133.415 180.845 131.792 182.262 130.497C184.177 128.747 185.847 127.724 187.406 126.236C188.906 124.804 190.045 122.99 191.736 121.634C193.323 120.361 193.837 118.524 195.387 117.505C198.165 115.68 200.056 114.059 202.086 112.837C204.419 111.432 207.494 110.267 210.81 109.924C213.089 109.688 214.671 108.911 217.645 108.706C219.893 108.551 222.515 107.555 225.359 107.084C230.211 106.28 235.376 106.605 237.069 107.214C239.446 108.069 242.14 108.903 243.904 109.65C245.716 110.417 247.02 111.607 248.37 112.762C248.717 113.058 249.18 113.101 249.052 113.17C247.379 114.072 245.274 112.159 243.175 111.079C239.62 109.25 236.886 108.505 234.917 107.626C232.768 106.666 229.717 106.069 225.791 104.853C221.243 103.444 214.834 105.647 212.656 106.875C210.901 107.864 210.49 110.251 209.877 112.686C209.015 116.109 209.402 122.925 210.076 127.103C210.392 129.061 213.567 134.439 216.163 139.008C217.78 141.854 219.007 146.115 220.087 148.011C221.333 150.199 224.009 151.124 226.713 152.679C229.265 154.147 230.91 155.322 232.873 156.268C234.73 157.163 236.862 158.026 238.693 158.706C240.698 159.451 242.684 159.65 248.353 159.859C251.083 159.96 252.833 157.092 253.921 155.064C255.72 151.713 254.465 146.967 253.454 139.804C252.067 129.971 253.113 122.852 252.843 121.705C252.286 119.336 252.029 116.105 251.222 113.651C250.917 112.726 250.004 112.159 249.797 112.021C247.593 110.552 252.971 115.26 254.526 117.221C256.843 120.143 257.031 122.162 257.644 124.259C258.391 126.814 259.061 129.332 260.078 131.162C261.159 133.11 262.439 135.957 264.136 138.198C266.854 141.787 269.202 148.534 270.363 151.055C271.617 153.778 273.4 157.344 275.434 160.793C276.822 163.147 277.33 166.811 277.943 169.255C278.44 171.238 278.686 172.909 279.228 174.535C279.498 175.345 279.904 176.161 279.908 176.703C279.91 177.002 278.84 176.709 278.292 176.439C276.563 175.587 276.794 173.064 276.12 169.353C274.605 161.012 275.576 157.377 275.239 153.918C274.799 149.396 274.764 145.603 274.427 142.075C274.118 138.837 274.764 130.493 274.427 124.289C273.916 114.88 275.3 112.711 276.788 108.653C278.005 105.333 280.31 103.235 281.66 102.212C282.406 101.646 283.554 101.331 284.971 101.128C287.743 100.731 289.371 102.545 291.334 103.491C293.118 104.351 294.243 105.793 295.532 107.143C297.152 108.839 298.847 110.389 300.739 112.822C302.753 115.414 304.125 117.29 304.738 119.32C305.372 121.42 305.887 123.38 306.092 125.477C306.365 128.278 307.104 130.688 307.31 141.748C307.378 145.47 308.054 150.012 308.391 153.286C308.726 156.536 309.272 158.968 309.676 161.136C310.116 163.494 310.896 168.281 311.704 172.432C312.381 175.911 312.654 179.003 312.857 179.344C313.861 181.031 312.114 170.936 312.451 165.829C312.659 162.677 312.386 159.934 312.183 156.171C311.75 148.132 312.382 142.071 312.788 140.451C313.747 136.627 313.738 132.198 314.075 129.151C314.367 126.514 314.55 123.81 314.887 120.83C315.466 115.711 314.144 112.711 313.874 110.809C313.624 109.046 314.412 107.157 314.617 104.183C314.752 102.228 315.362 100.393 316.101 98.2275C317.533 94.03 319.958 92.9478 321.513 91.7258C322.414 91.0176 323.478 90.7758 324.354 90.7068C326.324 90.5518 327.127 93.3375 327.742 95.3674C328.494 97.847 330.245 99.9631 331.865 105.302C332.821 108.452 334.167 111.063 334.981 114.038C335.864 117.268 336.741 119.32 337.754 121.147C339.186 123.729 340.395 125.272 341.745 126.632C343.101 127.999 344.584 130.005 346.21 131.637C348.036 133.47 349.862 135.153 351.555 137.319C353.093 139.287 356.886 142.177 359.269 144.223C361.271 145.942 362.585 147.333 364.073 148.959C365.563 150.587 367.587 152.066 369.418 153.156C371.445 154.363 373.133 155.996 375.372 157.013C377.057 157.779 379.222 158.57 380.788 159.853C382.227 161.033 384.232 161.948 386.4 163.103C388.312 164.121 390.858 164.66 393.572 164.932C395.83 165.158 398.709 165.878 400.879 166.42C404.057 167.213 406.293 167.096 408.256 167.301C411.028 167.59 415.622 167.908 418.537 168.45C422.871 169.255 427.81 169.126 429.974 169.937C432.775 170.989 436.189 170.482 438.434 170.751C441.461 171.115 445.267 170.214 449.656 170.009C452.724 169.865 455.684 169.402 458.122 168.456C460.02 167.372 462.984 166.292 465.365 165.007C465.708 164.534 465.842 163.864 466.386 162.362" stroke="black" stroke-width="8" stroke-linecap="round"/>
                <path d="M506.578 44.6286C506.712 43.5527 506.984 41.1209 507.658 38.2791C508.163 36.1492 508.47 34.4872 510.023 31.7834C511.217 29.7037 512.66 27.1878 514.556 25.0807C516.303 23.1388 517.531 20.9519 518.82 19.464C520.235 17.8309 521.591 16.4862 524.632 13.5834C526.857 11.4595 528.493 10.6644 530.655 10.1894C531.579 9.98634 533.072 10.1204 534.099 10.5223C537.187 11.7305 537.156 14.846 537.97 16.677C538.957 18.8953 539.998 20.6677 541.082 23.3716C542.053 25.7921 543.384 27.8373 543.656 30.6122C543.871 32.8093 544.87 34.877 545.213 39.1986C545.461 42.3231 545.82 46.1063 547.036 49.8921C547.693 51.9395 548.524 53.8199 549.474 55.9879C550.351 57.9891 550.554 60.8515 550.897 64.0364C551.184 66.7078 551.642 69.1091 553.394 73.0329C554.323 75.114 554.881 77.9026 555.632 81.3554C556.456 85.1392 556.107 87.914 556.915 90.496C557.622 92.7549 558.137 94.8237 559.485 102.584C560.407 107.893 560.573 112.817 561.247 116.002C561.77 118.473 562.059 120.4 562.601 122.838C563.121 125.178 564.089 128.382 564.968 130.351C565.845 132.316 565.713 135.146 566.255 137.32C567.174 141.006 566.931 145.709 567.136 151.042C567.28 154.779 568.279 160.446 568.76 163.84C568.827 164.522 568.961 165.058 569.03 165.87C569.099 166.682 569.099 167.754 569.099 168.858" stroke="black" stroke-width="8" stroke-linecap="round"/>
                <path d="M592.645 27.1709C592.912 27.9788 593.992 31.2063 595.143 35.2722C597.088 42.142 596.834 45.5617 597.784 50.2934C598.404 53.382 598.734 56.1172 599.609 59.6329C601.042 65.3925 601.3 69.2465 601.643 71.8184C602.028 74.7008 602.794 77.3661 603.468 80.5408C604.693 86.3133 605.084 91.015 605.703 94.5531C606.174 97.2433 606.578 99.9628 607.325 103.28C607.854 105.629 608.478 107.408 609.286 109.507C609.966 111.274 610.37 112.962 611.11 115.449C614.311 126.191 615.647 131.767 616.593 134.473C617.767 137.831 618.489 140.829 619.368 144.484C620.241 148.116 620.657 152.724 620.994 157.064C621.197 165.467 621.469 168.167 621.806 170.136C621.875 170.611 621.875 171.147 621.875 171.699" stroke="black" stroke-width="8" stroke-linecap="round"/>
                <path d="M615.786 118.922C615.25 118.922 613.099 118.922 609.788 119.056C607.383 119.153 601.76 119.734 594.253 119.667C588.683 119.617 584.68 117.038 582.502 115.745C580.859 114.769 578.582 114.188 576.751 113.108C574.478 111.767 571.827 109.462 569.645 108.234C568.204 107.424 566.005 103.657 564.501 100.998C563.338 98.9408 562.879 97.007 562.132 95.3811C561.26 93.483 560.979 90.2515 560.642 87.2006C560.143 82.6829 561.653 80.232 563.139 76.2412C563.99 73.9542 565.031 72.5103 566.655 71.2233C569.204 69.2032 571.526 72.0962 572.815 73.3791C575.453 76.004 579.646 79.9397 581.002 81.6326C582.715 83.7715 583.844 85.6234 585.399 87.3163C587.155 89.2285 587.904 90.9011 589.258 92.864C590.427 94.5597 591.289 96.8527 592.706 98.2107C595.742 101.12 598.183 105.37 599.88 107.211C601.309 108.761 603.461 110.12 605.022 111.608C607.022 113.515 609.144 114.854 610.975 116.413C612.679 117.864 614.958 119.052 617.806 120.002C620.137 120.779 625.887 120.546 632.399 120.883C640.702 121.312 647.306 120.818 649.399 120.615C653.116 120.254 655.832 119.604 658.603 119.06C664.927 117.818 670.293 113.254 675.313 112.359C676.403 112.292 677.341 112.158 678.293 111.955C679.245 111.752 680.182 111.484 681.149 111.208" stroke="black" stroke-width="8" stroke-linecap="round"/>
            </svg>
        </div>
    );
}

export default Signature;
